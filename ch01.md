# Linuxとは
Linuxについて説明するにあたり、必要な知識である基本ソフトと応用ソフトの考え方を学習します。基本ソフトの用途、さらにそれらの特徴と、基本ソフトの中でもさらに「カーネル」と「ユーザランド」の働きを学習します。

## 基本ソフトウェアと応用ソフトウェア
動作しているコンピュータは、大きく2つの要素に分けられます。ハードウェアとソフトウェアです。ハードウェアとは、コンピュータの機械そのもののことを指します。ソフトウェアとは、ハードウェアで動作しているプログラムを指します。ゲーム機本体（＝ハードウェア）とゲームのソフト（＝ソフトウェア）の関係を想像するとわかりやすいのではないでしょうか?
ソフトウェアにも大きく分けて2種類あります。基本ソフトウェアと応用ソフトウェアです。基本ソフトウェアはOS（Operating System）のことを指します。応用ソフトウェアはOSの上で動くアプリケーションを指します。たとえばWindowsやLinux、macOSは基本ソフトウェア、ワープロや表計算、Webブラウザなどは応用ソフトウェアになります。

### 基本ソフトウェアの役割
基本ソフトウェアは応用ソフトウェアが動作する際に必要な「部品」を提供したり、ハードウェアという「資源」を管理するという役割があります。応用ソフトウェアを想像してみてください。応用ソフトウェアにはウィンドウがあり、メニューやツールバーアイコン、ファイルを開いたり保存する際に出てくる確認メッセージなどがあると思います。これらの機能を各応用ソフトウェアが用意していたのでは、応用ソフトウェアの作成が大変になってしまいます。このようにさまざまな応用ソフトウェアが使うであろう共通部品を提供するのが基本ソフトウェアの大事な役割の1つです。

それ以外にも「資源を管理する」という役割があります。この場合の「資源」とは、コンピュータが提供できる機能・能力を示しています。例えば、ワープロや表計算の応用ソフトウェアを同時に動かすことができます。本来のコンピュータは同時に1つの処理しかできません。それにもかかわらず同時に動作させることができるのは、各ソフトウェアを非常に短いタイミングで切り替えているからです。これは基本ソフトウェアが司っている機能です。

## UNIX
本教科書ではLinuxの基本操作をコマンドを実行しながら学ぶことができますが、ここではまずLinuxの元になったUNIXがどうやってできたのか説明します。

### UNIXの誕生
1960年代にUNIXは米国の通信会社AT&Tのベル研究所で誕生しました。当時ベル研究所では、先行研究としてMULTICSというOSの開発に参加していました。一方、研究者であるKen Thompson氏が研究所の片隅で使われていないコンピュータを発見し、自分で考えた機構を試験運用するために、そのコンピュータにOSの基本要素となる幾つかのプログラムを搭載しました。これがUNIXのはじまりであるといわれています。

MULTICSはあまりにも多機能・高機能を目指していたため、研究開発が頓挫してしまいました。Ken Thompson氏は、自分が作ったその小さなプログラムに、MULTICSの機能を取り入れUNIXの原型となるOSが作られていきました。

実際、UNIXは非常にコンパクトで小回りも利き、さまざまな実験プロジェクトにも用いられるようになりました。AT&Tで文書校正のソフトウェアが必要になった際に、文書校正ソフトウェアを動かすためのOSとして用いられた経緯もあります。

また、当時AT&TはUNIXを商品として考えていなかったので、送料・メディア代等の経費を支払うだけで、自由に利用を許可していました。さらに、ソースコードといわれるUNIXの設計に関する基本部分をそのまま配布していたので、手に入れたユーザは独自に研究・開発・変更等を行なうことができました。

### さまざまな分離・統合
配布されたUNIXは、メンテナーの手によって自由に改造が施されました。その結果、さまざまな団体や企業によりUNIXが作成されたため、UNIXとしてのまとまりがなくなってきました。この問題を解決するため、AT&Tが正式にライセンス契約を始め、UNIXを管理するようになりました。このAT&TのUNIXをSystem Vと呼び、以降、AT&T(及びUNIXのライセンス管理団体)と契約を結んだ組織のみが、自社の出したOSをUNIXと宣言できるようになりました。

一方、AT&Tとライセンス契約を結んでいない組織もあります。これらの組織が開発したUNIXのことをUNIX互換OSと呼びます。

### 派生UNIX
このように、互換OSも含めて非常に多くのUNIXが広まっていきました。その派生した中で大きな影響を及ぼしたのがバークレー版UNIXです。

バークレー版UNIXは、UNIXの開発者であるKen Thompson氏がカリフォルニア大学バークレー校にいたときに作成した派生OSです。この派生OSの最大の特徴として、当時アメリカ軍内部の通信方式として採用された、IP(インターネットプロトコル)の実装が行われた点があげられます。UNIXがインターネットに強いと言われているのはこの経緯によるものです。このバークレー版UNIXはBSD(Berkeley Software Distribution)と呼ばれ、System Vと並ぶ２つの流れを形成しました。

### Linuxの誕生
UNIXの多くは高いライセンス使用料のもと、企業や大学等で利用することが続いていました。自宅で、しかもパソコンで利用できることが多くのユーザの夢でした。

そんな中、「僕は今、(UNIXに似た)OSを作っている。」という投稿が、1991年にネット上に流れました。投稿者はLinus Torvaldsという、当時フィンランドの大学生で、コンピュータの機能の学習からそのようなプログラムを書き始めていたようです。そのプログラムはネットワーク上で公開されました。

プログラムの原型は非常に原始的なもので、コンピュータに詳しい人間のみが動かすことが可能でした。設計の基本はUNIXとそっくりでしたが、System Vの流れもBSDの流れも持たない独自のUNIX互換OSでした。その後、Linus Torvaldsが学習のために作り上げた小さなプログラムは、さらなる機能拡張やソフトウェア、ツールを組み合わせ、UNIX互換のOSとして立派に動作するまでになりました。そう、Linuxが誕生したわけです。

Linuxのプログラムにおいて、一番特徴的なところは、そのライセンス形式でした。Linuxのプログラムには、GPL(GNU General Public License: GNU一般公衆利用許諾)というライセンス形式が採用されています。GPLはGNUプロジェクトのリチャード・ストールマンにより作成されました。以下の特徴を含むフリーソフトウエアライセンスの一つです。

- プログラムを実行する自由
- ソースの改変の自由
- 利用・再配布の自由
- 改良したプログラムをリリースする権利

Linuxは多くのディストリビューターにより開発され、非常に多くのユーザに使われるようになりました。実質無償でかつ自由に利用、改変できるライセンス体系であるGPLをLinuxが採用したためです。自由ソフトウエアを実現するGPLはライセンスの性格上、GPLを条件に受領したソフトウエアをベースとしたソフトウェアをバイナリ形式で一般に頒布する場合、ソースコードを添付またはソースコードを提供する旨の申し出を添付するという条件を満たさなければなりません。

しかし、このライセンス体系が良いように働いた結果、Linuxは一部の個人や組織に独占されることなく、全利用者がその恩恵を受けて発展させていくというスタイルができました。現在、さまざまなディストリビューターによりLinuxが公開され、パーソナルコンピュータに容易にLinuxがインストールできるのも、LinuxがGPLを採用したからこそなのかもしれません。

## Linuxの特徴
Linuxはどういった仕組みで動作するのでしょうか。Linuxの特徴についてここでご紹介しましょう。

### カーネルとユーザランド
ソフトウェアは、基本ソフトウェアと応用ソフトウェアの2つに分かれると説明しました。基本ソフトウェアは、さらに2つの領域に分かれます。それらを「カーネル」と「ユーザランド」といいます。それぞれには、以下の特徴があります。

#### カーネル
カーネルはオペレーティングシステムの中核となる部分で、ハードウェアと直接やりとりするなどもっとも中心的な機能を受け持つ部分です。カーネルはハードウェアの違いを吸収して、プログラムがどのようなハードウェア上でも同じように動作する役割があります。

#### ユーザランド
OSが動作するのに必要な、カーネル以外の部分のことです。ファイル操作コマンド、シェルなどの基本的なソフトウェア群を指します。 

### Linuxを使う
Linuxは、基本的にはコマンドで操作します。コマンドはユーザランドで動作します。また、LinuxにX Window SystemとGNOME、KDE、Xfceなどのデスクトップ環境を導入することで、WindowsやMacなどのようにマウス入力による操作が行なえるようになります。

### シェル
前項で「Linuxはコマンドで操作する」と説明しました。コマンドは文字通り「命令」のことで、さまざまな用途のコマンドがあります。
Linuxにはシェルという対話型のコマンド入力環境が用意されています。シェルは入力されたコマンドを理解し、実行します。

シェル自体には大きく2つの機能があります。1つは、前述の通りコマンド入力を受け付けることです。もう1つはシェルスクリプトの実行にあります。シェルスクリプトとは、「コマンドの入力を自動化する」ためのものです。1つのファイルにコマンドを1行ずつ記述して作成します。作成したシェルスクリプトを実行することで、コマンドの実行を自動化することができます。また、作成したシェルスクリプトをサーバーの起動時に実行したり、数時間毎に実行したりすることができます。

### ログイン
Linuxでは、利用開始時にユーザ名とパスワードを入力します。このユーザ名とパスワードの組み合わせをアカウントといいます。アカウントを使ってLinuxを使い始めることを「ログインする」といいます。ログインするのは、そのコンピュータの利用許可を得るためです。パスワードはログイン名の認証に利用され、例えばログイン名を銀行の口座番号としたとき、パスワードは口座の暗証番号に相当します。

## ディストリビューション
Linuxは日々改良が進み、はじめは単機能しか備えていなかったものが、さまざまなハードウェア上で動くように改良されていき、次第にUNIX互換OSとして機能するまでになりました。

しかし、当初のLinuxはインストール作業が非常に困難で、一部のコンピュータのスキルが高いユーザしか使うことができませんでした。
そこで、さまざまな団体がLinuxを使う上で必要なプログラムをまとめ、簡単な手順で手軽にインストールできるようにしました。これがLinuxディストリビューションのはじまりです。このようにLinuxディストリビューションを開発する団体をディストリビューターといい、代表的なLinuxディストリビューターとしてはRed HatやDebian Project、Ubuntuを開発しているCanonicalなどがあり、さまざまな団体によって「Linux」はリリースされ続けています。

### パッケージ
パッケージはLinuxに対して追加機能を提供するものです。従来、応用ソフトウェアの実行をLinux上で行なうにはソースをダウンロードして自らビルドする必要がありました。これは非常に時間と手間がかかります。この問題を解決するため、ディストリビューターの手によりビルドして応用ソフトウェアを簡単に導入できるようにするためにパッケージが作られるようになりました。

### パッケージマネージャ
応用ソフトウェアの導入には、複数の応用ソフトウェアやこの動作を補足するライブラリが必要な場合があります。依存するプログラムがさらに別のプログラムを依存しているとなると、それらを正しい場所に正しい順序でインストールしなくてはなりません。

さらに開発が盛んなプログラムは、バグの修正や機能改善、セキュリティ脆弱性の修正など常に更新されています。新しいプログラムをインストールするときは、現在稼働している古いプログラムをきれいに削除してインストールします。インストールする作業もさることながら、削除する作業も非常に困難です。

そこでパッケージを簡単にインストールしたり、アップデートするパッケージマネージャというものが標準で用意されるようになりました。今日のLinuxディストリビューションには何らかのパッケージマネージャが必ず用意されており、インターネットに接続されていれば最新のパッケージ（と、依存するパッケージやライブラリ）を導入、更新することが容易にできるようになっています。

