# viエディタ
Linuxの設定をするためにしばしば利用されるvi(vim)を操作しながら、エディタの基本的な機能を学んでみましょう。本章ではviの機能のうち、ファイルの開閉やテキストの検索や置換、ページ移動や編集方法など基礎的な操作を解説します。

## viの基本操作
viはページャであり、エディタでもあります。
viでファイルを開いた場合はコマンドモード（viewモード）といって、ページングによる行やページ単位の移動や、行の削除、コピー、カット、ペーストなどの編集操作を行なうことができるモードと文字入力を受け付けるインサートモードがあります。

エディタを開始する方法はviコマンドに続いて編集したいファイルのファイル名を指定することで作業を開始できます。エディタを終了する方法は「コマンドモード」で終了コマンドを実行することでviエディタによる編集作業を終えることができます。

それでは早速、基本操作であるファイルの開閉とファイルの保存と終了の方法について実際にコマンドを実行してみましょう。

### ファイルを開く
viコマンドでファイルを開くにはviコマンドの後に編集したいファイルを指定します。

書式
vi [ファイル名]

### ファイルを閉じる


viコマンドを使って開いたファイルを閉じるには、「ESC」キーを押したあと、:qと入力します。
qはquitの略です。ファイルを閉じることができます。


○実習: viによるファイルの開閉


viを使って、既存の設定ファイルである/etc/hostsファイルを開き、内容を確認したら閉じてみましょう。

 1. まずは既存のファイルを開いてみます。

$ vi /etc/hosts

 1. ファイルが開きました。
//indepimage[vi-openclose1][][latex::width=0.8\maxwidth]


 1. :qコマンドを実行してファイルを閉じます。
//indepimage[vi-openclose2][][latex::width=0.8\maxwidth]


 1. viコマンドが終了して、コマンド入力待機状態に戻ります。


### ファイルを保存する
viコマンドを使って開いたファイルを保存するには、「ESC」キーを押したあと、:wと入力します。
wはwriteの略です。ファイルに変更内容が書き込まれて、編集作業を継続できます。

test.txtというファイルを開き、ファイルを保存してみましょう。

$ vi test.txt

↓

:w（コマンドを入力）


↓


"test.txt" 1L, 5C 書込み



### ファイルを保存して終了する
viコマンドを使って開いたファイルを保存したあとファイルを閉じるには、「ESC」キーを押したあと、:wqと入力します。
wにより変更内容が書き込まれ、qによりファイルを閉じます。

test.txtというファイルを開き保存したあと、ファイルを閉じて終了してみましょう。

$ vi test.txt

↓


:wq

↓

$ vi test.txt
$ 


### ファイルを保存せずに強制的に閉じる
viコマンドを使って開いたファイルを保存せずに閉じるには、「ESC」キーを押したあと、:q!と入力します。
通常、編集済みのファイルはそのままでは閉じることができません。:qコマンドのあとに!をつけることで、ファイルを保存せずに強制的に終了できます。

test.txtというファイルを開き、ファイルを強制的に閉じてみましょう。

$ vi test.txt

↓


:q!

↓

$ vi test.txt 
$ 



○実習: viによるファイルの操作


viのさまざまな操作を行なってみましょう。
viの詳細な操作手順はこのあと説明しますので、ここではまず手順に従って操作してみてください。

 1. 以下のコマンドを実行します。
$ vi editfile.txt

 1. 内容が空のファイルが開きます。
//indepimage[vi-editfile1][][latex::width=0.8\maxwidth]


 1. 「i」キーを押して「インサート」モードに切り替えます。
//indepimage[vi-editfile2][][latex::width=0.8\maxwidth]

 1. キーボードで「Apple」と入力しましょう。
//indepimage[vi-editfile3][][latex::width=0.8\maxwidth]

 1. 「ESC」キーを押して「インサート」モードから抜けます。

 1. :wコマンドを実行してファイルを保存します。
//indepimage[vi-editfile4][][latex::width=0.8\maxwidth]

 1. ファイルが保存され、「書込み」と表示されます。
//indepimage[vi-editfile5][][latex::width=0.8\maxwidth]


 1. 「コマンド」モードで「A」キーを押して行末まで移動し、「Enter」キーを押して改行します。

 1. 次の行に「Orange」と入力しましょう。
//indepimage[vi-editfile6][][latex::width=0.8\maxwidth]

 1. 「ESC」キーを押して「インサート」モードから抜けます。
 1. :qコマンドを実行して、ファイルを閉じてみます。
 1. 変更した内容が保存されていないため、エラーが表示されます。
//indepimage[vi-editfile7][][latex::width=0.8\maxwidth]

 1. :wqコマンドを実行すると、ファイルを閉じることができるのを確認します。
 1. もう一度ファイルeditfile.txtを開きます。
 1. 「コマンド」モードで「A」キーを押して行末まで移動し、「Enter」キーを押して改行します。
 1. 次の行に「Banana」と入力しましょう。
 1. 「ESC」キーを押して「インサート」モードから抜けます。

 1. :q!コマンドを実行すると、ファイルを閉じることができるのを確認します。
//indepimage[vi-editfile8][][latex::width=0.8\maxwidth]

 1. ファイルを開き、「Banana」という文字列がファイルに書かれていないことを確認します。
//indepimage[vi-editfile9][][latex::width=0.8\maxwidth]


viはファイルの操作や閲覧を行なう「コマンドモード」と、ファイルの編集を行なう「インサートモード」の切り替えという概念はあるものの、使い慣れているエディタとほぼ同じように操作できることがわかったと思います。

次の手順以降でさらにいろいろなviの機能を学習しましょう。

## インサートモードとコマンドモード

viエディタを起動すると、コマンドを入力するコマンドモードでファイルが開かれます。
文字列を打ち込むにはiコマンドもしくはaコマンドなどでインサートモードへ切り替えます。
viコマンドはスクリーンエディタと呼ばれ、基本的にカーソルがある位置に対してコマンドを実行します。

### テキストの入力

文字列を入力するインサートモードは、コマンドでインサートモードへ切り替える必要があります。インサートモードへの切り替えにはさまざまなコマンドがありますが、ここではiコマンドと、aコマンドについて説明します。


○実習: テキストの入力


早速ファイルを開いて文字列を入力してみましょう。書き換え可能なファイルであるviinsert.txtを新規作成してみます。

$ vi viinsert.txt"viinsert.txt" [新ファイル]                                0,0-1        全て


文字列を入力するにはインサートモードへ移行します。
カーソルがある位置(文字の前)にテキストを入力するにはiコマンド(insertコマンド)を使います。

早速文字を入力してみましょう。
 1. まず、インサートモードに切り替えるため、iコマンドを入力します。
 1. 画面左下に挿入と表示されます。


-- 挿入 --


 1. 文字を入力します。
test


インサートモードではカーソルがある位置にテキストを挿入しましたが、カーソルのある文字の後にテキストを入力するモードもあります。早速文字を入力してみましょう。
入力モードから抜けるには「Esc」キーを入力してください。

 1. まず、インサートモードに切り替えるため、aコマンド(appendコマンド)を入力します。
 1. 画面左下に挿入と表示されます。


-- 挿入 --


 1. 文字を入力します。
testTEST


前の手順で入力した文字列の末尾に今回入力したTESTが追加されました。


カーソルの位置ではなく、行の先頭にテキストを入力するにはIコマンドを使います。早速文字を入力してみましょう。
入力モードから抜けるには「Esc」キーを入力してください。

 1. まず、インサートモードに切り替えるため、Iコマンドを入力します。
 1. 画面左下に挿入と表示されます。


-- 挿入 --


 1. 文字を入力します。
1234testTEST


前の手順で入力した文字列の先頭に今回入力した1234が追加されました。


行の最後にテキストを入力するにはAコマンドを使います。早速文字を入力してみましょう。
入力モードから抜けるには「Esc」キーを入力してください。

 1. まず、インサートモードに切り替えるため、Aコマンドを入力します。
 1. 画面左下に挿入と表示されます。


-- 挿入 --


 1. 文字を入力します。
1234testTEST6789


前の手順で入力した文字列の末尾に今回入力した6789が追加されました。


文字を間違えたときは「Delete」や「BS」でカーソルの前の1文字が削除できます。「Delete」キーや「BS」キーの動作は使う環境により変わってきます。
ファイルを変更したので、:wqコマンドで入力した文字列をファイルへ保存してから終了してください。

:wq"viinsert.txt" [新] 1L, 17C 書込み


### カーソルの移動

テキストファイルを編集していると、入力間違いに気がついたり、後からの変更が出てくるので、既に入力したテキストを修正したいときがあります。追加する文字がある場合は、カーソルを修正したいところへ移動して文字を入力します。


○実習: カーソルの移動


ファイルを開いて文字列を入力した後でカーソルを移動する練習をするため、書き換え可能なファイルであるvimove.txtを新たに開きます。

$ vi vimove.txt

以下の例文を入力してください。
Apple
Orange
Banana
Melon



### カーソルの左右移動

viでカーソルを左へ移動するには「h」を、カーソルを右へ移動するには「l」と入力します。
CentOS 7で利用できるviコマンドでは、カーソルキーの左右を使ってカーソルの左右移動をすることもできます。

### カーソルの上下移動

カーソルの上下移動は「j」で下へ、「k」で上へ移動することが可能です。
CentOS 7で利用できるviコマンドでは、カーソルキーの上下を使ってカーソルの上下移動をすることもできます。

### コマンドを使った行頭への移動

0（ゼロ）コマンドを実行すると、カレント行の行頭へ移動することができます。

### コマンドを使った行末への移動

$コマンドを実行すると、カレント行の行末へ移動することができます。


## 編集中の大きな移動

viコマンドは小さなファイルから大きなファイルまでを編集できます。
1画面に収まらない大きなファイルを編集する場合は1文字ずつカーソルを移動するコマンドだけでは大変でしょう。ページ単位で移動するコマンドや、指定の行へ移動するコマンドや、目的の文字列へ移動するコマンドを使います。

### ページ単位の移動

素早く編集するために画面をページ(デフォルト指定の行数)単位で前後へ移動するコマンドを使います。


○実習: ページ単位の移動


ページ単位の移動の実習を行なうため、viコマンドで既にある/var/log/dmesgログファイルを開いてください。実習が終わったら編集内容を保存せずに終了します。

$ vi /var/log/dmesg"/var/log/dmesg" [読込専用] 299L, 14056C


次のページへの移動は「Ctrl」fコマンドです。
前のページへの移動は「Ctrl」bコマンドです。

:q!$


実習が終わったら、今回は利用したログファイルを保存しないで終了するために:q!コマンドでviを終了してください。


### 行を指定した移動

素早く編集するために指定の行へカーソルを移動するコマンドを使います。


○実習: 行の移動


開いたファイルから指定行への移動を行なう実習を行なうため、viコマンドで/var/log/dmesgファイルを開いてください。

$ vi /var/log/dmesg"/var/log/dmesg" [読込専用] 299L, 14056C


今回開いたdmesgファイルのように、大きなファイルではページ単位の移動だけでは大変なこともあります。
ここではファイルを効率的に閲覧するために行数を指定して移動したり、行を移動するコマンドを使ってみましょう。


### 行番号を指定した移動

行番号を指定して移動するには、これまでにコマンドを入力する時に出てきた:の後に行番号を指定します。
たとえば10行目へ移動したい場合は、「:10」と入力してください。
10行目へカーソルが移動します。

:10


「:1」と入力すると1行目へ戻ります。
:1


### コマンドを使った文書頭への移動

ggコマンドを実行すると文書頭、つまり1行目へ戻ることができます。

### コマンドを使った文書末への移動

Gコマンドを実行すると文書末、つまり最終行へ移動することができます。

実習が終わったら、今回は利用したログファイルを保存しないで終了するために:q!コマンドでviを終了してください。
:q!$


## 様々な編集操作

viの編集の基礎である「カット・アンド・ペースト」や「コピー・アンド・ペースト」、アンドゥについて説明します。

### 文字のカット・アンド・ペースト

文字のカット・アンド・ペーストの機能はコマンドモードで実行します。文字をカットするコマンドと、カットした文字をペーストするコマンドであるコマンドを利用します。

カット・アンド・ペーストで使うコマンド
| コマンド | 内容
|-|-
| x | 1文字削除
| dd | 1行削除
| yy | 1行コピー
| p | カーソルの文字の次または次の行にペースト
| P | カーソルの文字の前または前の行にペースト
| u | カット、ペーストを一回取り消し（アンドゥ）

○実習: 文字のカット・アンド・ペースト
viコマンドでvicutpaste.txtファイルを開き、カット・アンド・ペーストするためのサンプル文字列を入力してください。ここでは以下の画面と同じになるようにiコマンドでインサートモードにしたあと、以下のように入力します（わざと間違えています）。

$ vi vicutpaste.txtThis is aa pen.
That is na apple.
（略）
"vicutpaste.txt" [新ファイル]                                  0,0-1        全て


上記の例文は2つの誤りがあります。
一つ目はaaと連続している箇所、そしてもう一つはnaとミスタイプしている箇所です。

これを正しい文に修正しましょう。

 1. まずコマンドモードにしてカーソルをaaの位置に移動します。
 1. xコマンドでaaのaを1文字削除してください。

This is a pen.
That is na apple.


これで一行目の文の修正ができました。

先ほど文字の削除に利用したxコマンドは、xコマンドで削除した最後の文字はバッファと呼ばれる一時的な箱に入ります。そのため、pコマンドを実行するとバッファに保存された文字を取り出すことができます。

次に二行目の文を修正しましょう。

 1. まずコマンドモードにしてカーソルをnaのnの位置に移動します。
 1. xコマンドでnaのnを1文字削除してください。
 1. xコマンドでnが削除されました。
This is a pen.
That is a apple.


 1. aにカーソルがある状態でpコマンドを入力します。
This is a pen.
That is an apple.


aのあとにnが挿入され、これで二行目の文の修正ができました。

pコマンドはカーソルがある文字の後に文字をペーストします。なお、カーソルの前に文字をペーストしたいときはPコマンド(Pasteコマンド)を使います。


### 行のカット・アンド・ペースト

行単位のカット・アンド・ペーストとコピー・アンド・ペーストの機能はコマンドモードで、行のカットをするコマンドと、カットした文字列をペーストするコマンドを使います。


○実習: 1行の文字列をカット・アンド・ペースト


viコマンドでvicutlinepaste.txtファイルを開き、サンプル文字列を入力してください。ここでは以下の画面と同じになるようにiコマンドでインサートモードにしたあと、「This is a pen.「Enter」That is an apple.「Esc」」と入力します。

$ vi vicutlinepaste.txtThis is a pen.
That is an apple.
（略）
"vicutlinepaste.txt" [新ファイル]                              0,0-1        全て


この例文を使って一行カットしてペーストしてみましょう。

行単位でカットしたい場合はddコマンドを使います。カットした行のテキストはバッファへ入るため、pコマンドまたはPコマンドを実行すると文字列をペーストできます。

「This is a pen」をddコマンドで一行カットしたあと、pコマンドとPコマンドを実行して違いを確認してみましょう。

### pコマンド

That is an apple.
This is a pen.

文字列がカーソルの下にペーストされます。

### Pコマンド

This is a pen.
That is an apple.

文字列が カーソルの上にペーストされます。


実習が終わったら、:wqコマンドでファイルを保存して閉じてください。

### 行のコピー・アンド・ペースト

行単位で文字列をコピー・アンド・ペーストすることもできます。まずyyコマンドで行全体をコピーします。yyコマンドを実行すると、文字列はバッファに入ります。バッファ内のテキストはpコマンドもしくはPコマンドでペーストできます。


○実習: 1行の文字列のコピー・アンド・ペースト


viコマンドでvicopypaste.txtファイルを開き、サンプル文字列を入力してください。ここでは以下の画面と同じになるようにiコマンドでインサートモードにしたあと、「This is a pen.「Enter」That is an apple.「Esc」」と入力します。
$ vi vicopypaste.txtThis is a pen.
That is an apple.
（略）
"vicopypaste.txt" [新ファイル]                                 0,0-1        全て


今回は2行目をコピーしたいと思います。2行目にカーソル移動してyyコマンドでコピーしてください。コピーした内容はpコマンドでペーストしてください。
実行結果は以下のようになると思います。
This is a pen.
That is an apple.
That is an apple.


yyコマンドでコピーした内容をpコマンドでペーストした場合、現在カーソルがある行の下に挿入されます。

コピーしたい行数を指定することもできます。指定する方法はyyコマンドの前に行数を指定するだけです。
3行コピーしてペーストしてみましょう。
複数行コピーするには「コピーしたい行数yy」のように指定します。

次の例では3行をコピーしたいと思います。ggコマンドを入力して文書頭まで戻ったあと3yyとコマンドを入力してください。
yyコマンドでコピーした文字列はバッファに入ります。pコマンドを実行してペーストしてください。

This is a pen.
This is a pen.That is an apple.That is an apple.That is an apple.
That is an apple.

※太字の部分がペーストした部分です。

実習が終わったら、:wqコマンドでファイルを保存して閉じてください。


### 編集の取り消し(アンドゥ)

テキストの編集で何か失敗をしたとき、それを元に戻したいことがあります。そのためのコマンドがアンドゥ(undo)で、uコマンドを入力します。viエディタでは、すべての編集操作について、uコマンドでそれを取り消すことができます。


○実習: 文字編集の取り消し


vicutpasteundo.txtという以下の内容のファイルを作成してuコマンドを実行し、早速カット・アンド・ペーストの取り消しを試してみましょう。

 1. ファイルを作成します。
$ vi vicutpasteundo.txtThis is a pen.
（略）


 1. xコマンドで、文字列を全部削除してください。
 1. uコマンドで、削除した文字列が一文字ずつ挿入されるのを確認します。
 1. :q!コマンドでファイルを閉じます。
 1. もう一度、ファイルvicutpasteundo.txtを開いてください。
 1. yyコマンドを押して、行をコピーしてください。
 1. pコマンドで、「This is a pen.」をペーストできることを確認します。
 1. uコマンドで、ペーストした文字列が削除されるのを確認します。

実習が終わったら、:wqコマンドでファイルを保存して閉じてください。


## 置換と検索

巨大であったり、全体像を把握していないファイルはカーソル移動やページ移動のコマンドだけを駆使して目的の位置へたどりつくのは大変です。テキストファイルの中にある文字列を検索するコマンドを使うと、素早く目的の位置に移動できます。また、置換コマンドを使えば文章中の文字列を探して別の文字列に置き換えることも素早く行なうことができます。

検索と置換に関するコマンド
| コマンド | 内容	
|-|-
| /検索文字列 | 文字列の検索
| n | 下方向へ再検索
| N | 上方向へ再検索
| :対象の行 s/検索文字列/置換文字列/オプション | 文字列を置換する


### 文字列の検索

テキストの中から目的の文字列へカーソルを移動するためには/コマンドを使います。
/コマンドのあと、検索したい文字列を続けて入力します。

書式
/文字列



○実習: 文字列の検索


viコマンドで/var/log/dmesgファイルを開き、このファイルから特定の文字列を検索してみましょう。

$ vi /var/log/dmesg"/var/log/dmesg" [読込専用] 299L, 14056C


//indepimage[vi-dmsg-0][][latex::width=0.8\maxwidth]


文字列を検索するコマンドは/です。/コマンドの後に探したい文字列を入力し、「Enter」キーを入力するとカーソルが文字列へ移動します。ここではCPUを検索するため、「/CPU」を入力しました。

ファイルの中には同じ文字列が複数現れることもあります。/コマンドで1回検索した文字列は、nコマンドまたはNコマンドで繰り返し探せます。nキーを押すと1つ次の文字列を再検索し、Nキーは1つ前の文字列を再検索し、nキーまたはNキーを押した回数だけ再検索できます。

文書末まで再検索を行なうと、「下まで検索したので上に戻ります」と表示され、もう一度再検索を文書頭から行なうことができます。

文字列を検索すると検索した文字列がハイライト表示されます。このハイライト表示は次の文字列を検索するまでハイライト表示が残ります。ハイライトを消すには:nohlsearchコマンドを実行してください。

実習が終わったら、今回は利用したログファイルを保存しないで終了するために:q!コマンドでviを終了してください。

:q!$


### 文字列の置換

viコマンドでは文字の置換を行なうことも簡単です。置換する対象は行範囲を指定することも、文書全体を対象にすることもできます。

書式
:対象の行s/検索文字列/置換文字列/オプション


置換方法の指定
| コマンド | 内容
|-|-
| :{n}s/old/new | {n}行目の最初のoldをnewに置換して終了
| :{n}s/old/new/g| {n}行目の全てのoldをnewに置換して終了
| :%s/old/new/g | ファイル全体の検索語句を置換する
| :%s/old/new/gc | 置換の度に確認を求める 

文字列を置換するコマンドは「:対象の行s/検索文字列/置換文字列/オプション」と記述できます。対象の行を省略すると現在カーソルがある行だけが置換対象になります。オプションにgを指定すると1行にある複数の検索文字列を置換します(gを指定しないと行ごとに1回だけ置換をします)。


○実習: 文字列の置換


viコマンドでvireplace.txtファイルを開き、サンプル文字列を入力したものを用意してください。
このファイルを使って文字列の置換を試してみましょう。

$ cat vireplace.txtlemon orange banana melon lemon
orange banana melon lemon orange
banana melon lemon orange banana
melon lemon orange banana melon
lemon orange banana melon lemon
orange banana melon lemon orange
banana melon lemon orange banana
melon lemon orange banana melon


### 指定行の文字列置換


指定行を置換対象とする場合は:指定行s/old/new/..のように記述します。

 1. まず、1行目のbananaをBANANAに置換してみましょう。以下のように操作してみてください。
:1s/banana/BANANA/g

 1. 結果は以下のようになったはずです。
lemon orange BANANA melon lemon
（略）


 1. 次に、orangeをORANGEに置換してみましょう。以下のように操作してみてください。
:1s/orange/ORANGE/

 1. 結果は以下のようになったはずです。
lemon ORANGE BANANA melon lemon
（略）


今回は1行目にはbananaやorangeが重複していなかったため、いずれも1つの文字列のみ置換されました。
次にgオプションありとgオプションなしの時の動作の違いを確認してみましょう。

 1. まず、2行目のorangeをORANGEに置換してみましょう。以下のように操作してみてください。
:2s/orange/ORANGE/g

 1. 結果は以下のようになったはずです。
ORANGE banana melon lemon ORANGE
（略）

gオプションを付けた場合、指定した行にあるすべての文字列を別の文字列に置換します。

 1. 次に、3行目のbananaをBANANAに置換してみましょう。以下のように今回はgオプション無しで操作してみてください。
:3s/banana/BANANA/

 1. 結果は以下のようになったはずです。
BANANA melon lemon orange banana
（略）

gオプションを付けなかった場合、指定した行にある最初の該当文字列のみ、別の文字列に置換して終了します。


### ファイル全体の文字列置換


ファイル全体を置換対象とする場合は:%s/old/new/gのように記述します。

 1. ファイル全体のmelonを*MELON*に置換してみましょう。以下のように操作してみてください。
:%s/melon/*MELON*/g

 1. 結果は以下のようになったはずです。
lemon ORANGE BANANA *MELON* lemon
ORANGE banana *MELON* lemon ORANGE
BANANA *MELON* lemon orange banana
*MELON* lemon orange banana *MELON*
lemon orange banana *MELON* lemon
orange banana *MELON* lemon orange
banana *MELON* lemon orange banana
*MELON* lemon orange BANANA *MELON*


行数ではなく%を指定した場合、置換範囲はファイル全体を検索範囲とします。

ファイル全体の中にあるmelonという文字列を*MELON*に置換できました。
一括置換は非常に便利ですが、時には「確認しながら置換したい」と思う場合があると思います。次の手順で説明します。

### 確認しながらファイル全体を文字列置換


次にgcオプション付きで、確認しながら文字列置換してみましょう。

 1. ファイル全体のlemonを@LEMON@に置換してみましょう。以下のように操作してみてください。
:%s/lemon/@LEMON@/gc

 1. 実行すると確認メッセージが出てきます。この時点では置換は実行されません。
lemon ORANGE BANANA *MELON* lemon
ORANGE banana *MELON* lemon ORANGE
BANANA *MELON* lemon orange banana
*MELON* lemon orange banana *MELON*
lemon orange banana *MELON* lemon
orange banana *MELON* lemon orange
banana *MELON* lemon orange banana
*MELON* lemon orange BANANA *MELON*
（略）                                                                                                                                                              
@LEMON@ に置換しますか? (y/n/a/q/l/^E/^Y) 


 1. yと入力すると置換が実行され、次のlemonを@LEMON@に置換するか確認メッセージが出ます。
（略）                                                                                                                                                              
@LEMON@ に置換しますか? (y/n/a/q/l/^E/^Y) y 


↓

@LEMON@ ORANGE BANANA *MELON* lemon
ORANGE banana *MELON* lemon ORANGE
BANANA *MELON* lemon orange banana
*MELON* lemon orange banana *MELON*
lemon orange banana *MELON* lemon
orange banana *MELON* lemon orange
banana *MELON* lemon orange banana
*MELON* lemon orange BANANA *MELON*
（略）                                                                                                                                                              
@LEMON@ に置換しますか? (y/n/a/q/l/^E/^Y) 

yを入力すると文字列置換して、nを入力すると文字列置換しません。
該当文字列が見つからなくなるまで、確認メッセージが出ます。
qを入力すると、文字列置換を中止できます。
