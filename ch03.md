# 基本的なコマンド

Linuxの操作の基本は、コマンドを入力して操作する方法です。この章では、ファイルとディレクトリの基本的な考え方に始まり、ファイルに関するコマンドやLinuxを利用する上で必要な基本的なコマンドを学習します。

## ファイル操作

本章では、ファイル操作を基本としたコマンドによる操作について学びます。CentOS環境を手元に用意して、実際にコマンドを実行した時の動きを確認してみましょう。

### ファイルとディレクトリ

コンピュータの基本的な作業は、情報（＝データ）を処理することにあります。データをコンピュータ上に保存しておく方法として、ファイルという形式が用いられます。文書を作成したら文書ファイルを保存しますし、デジカメで写真を撮ったら、画像ファイルをパソコンに保存する、といった具合です。
ファイルの数が増えると、内容や用途といった目的別に分ける必要が出てきます。このときに必要なものが、ディレクトリという考え方です。ディレクトリは、複数のファイルをまとめておくことができます。また、ディレクトリの中にディレクトリを作成することも可能です。

![ユーザー名設定の画面](image/Ch3/linuxtext2-img03.png){width=70%}

### ファイルやディレクトリの参照（ls）

ファイルを操作する上で、一番最初に必要になるコマンドは、その一覧を取得するコマンドです。ls(LiSt)が、そのコマンドにあたります。lsコマンドでは、ファイル名やディレクトリ名を指定して情報を取得することができます。ディレクトリ名を指定した場合、そのディレクトリの中にあるファイルやディレクトリ名の一覧を取得することができます。ディレクトリやファイルをlsコマンドで参照する場合、*と?をワイルドカードとして使うこともできます。

書式
ls [オプション] [ファイル]


オプション
-a
.で始まる隠しファイル等もすべて(All)出力します。

-l
長(Long)形式で出力します。

-t
最終更新時間(Time)によって、ソートをして出力します。

-r
逆順(Reverse)にソートをして出力します。



○実習: lsコマンドの実行


それでは早速Linuxをコマンドで操作してみましょう。まずは現在いるディレクトリ内にあるファイルやディレクトリの一覧を表示するコマンドのlsコマンドを実行してみましょう。

$ ls
ダウンロード デスクトップ ビデオ 画像
テンプレート ドキュメント 音楽   公開


いくつかのディレクトリがあることがわかります。


○実習: 場所を指定したディレクトリ一覧の取得


lsコマンドの後にファイルやディレクトリを指定した場合、指定したディレクトリ内にあるファイルやディレクトリを一覧表示することができます。

$ ls /usr/
bin  etc  games  include  lib  libexec  local  sbin  share  src  tmp


### 書式とは

書式とは、そのコマンドが用いられる形式を示しています。コマンド実行に必要な要素を、どのように列挙するかを示します。

### オプションとは

コマンドはオプションをつけることで、その動作を変えることができます。


○実習: lsコマンドでワイルドカードを使った絞り込み


まずは/etcディレクトリ上にあるファイルやディレクトリの一覧を表示してみましょう。

$ ls /etc/
ConsoleKit                            mailcap
DIR_COLORS                            makedev.d
（略）


ディレクトリ/etcには、多くのファイルやディレクトリが存在していることがわかります。
この中から目的のファイルを探すのは大変そうです。そこでファイルを絞り込んでリスト表示してみましょう。

lsコマンドの結果から絞り込む場合、ワイルドカードを使うことができます。
例えば、/etcディレクトリ内のconfファイルを絞り込んで表示するには、以下のように指定することができます。

$ cd /etc
$ ls *.conf
Trolltech.conf         nfsmount.conf
asound.conf            nsswitch.conf
autofs_ldap_auth.conf  ntp.conf
（略）


*は任意の文字列を示しており、この間に何文字が入っても検索結果として出力されます。
そのため、上記のように多くのconfで終わるファイルがリスト表示されたはずです。

ファイル名の文字数がわかっている場合は?を使って絞り込むこともできます。

$ cd /etc
$ ls ???.conf
cas.conf  gai.conf  ntp.conf  sos.conf  yum.conf


?は一個につき何らかの一文字を示します。そのため、ファイル名部分が3文字のconfが検索結果として出力されます。

ワイルドカードによるファイルの絞り込みの方法について理解を深めるため、以下の例題を実践してみましょう。

### hosts.のあとに何らかの名前のつくファイルを絞り込み

$ cd /etc
$ ls hosts.*
hosts.allow  hosts.deny


### hosts.のあとに4文字含まれるファイルを絞り込み

$ cd /etc
$ ls hosts.????
hosts.deny


### hosts.のあとに4文字+最後の文字がwであるファイルを絞り込み

$ cd /etc
$ ls hosts.????w
hosts.allow



○実習: ls -lコマンドの実行


-lオプションを付けてlsコマンドを実行した場合、情報が長形式で出力されます。

$ ls -l /home/linuxtext/
合計 32
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 ダウンロード
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 テンプレート
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月 26 18:33 2012 デスクトップ
drwxr-xr-x. 8 linuxtext linuxtext 4096  7月 27 14:07 2012 ドキュメント
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 ビデオ
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 音楽
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 画像
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 公開
（略）


/home/linuxtextディレクトリ内について、詳細な情報が出てきました。これは、lsコマンドに対して-lをつけたからです。このような-lのことを「オプション」といいます。lsは、ファイルやディレクトリの一覧を表示するコマンドです。コマンドに対してオプションをつけることで、さまざまな追加機能を指示することができます。

### ドットファイルの表示

隠しファイルも含めて長形式で表示するときは、次のように入力します。


○実習: ls -laコマンドの実行


-laオプションを付けてlsコマンドを実行した場合、詳細な情報が表示できます。
前の-lオプションと比べてどういった違いがあるか説明します。

$ ls -la /home/linuxtext
合計 196
drwx------. 31 linuxtext linuxtext 4096  7月 27 14:08 2012 .
drwxr-xr-x.  4 root      root      4096  7月  9 10:43 2012 ..
-rw-------.  1 linuxtext linuxtext 4960  7月 27 08:56 2012 .ICEauthority
drwxrwxr-x.  2 linuxtext linuxtext 4096  7月 18 09:52 2012 .abrt
-rw-------.  1 linuxtext linuxtext 3148  7月 26 19:30 2012 .bash_history
-rw-r--r--.  1 linuxtext       500   18 12月  2 23:40 2011 .bash_logout
-rw-r--r--.  1 linuxtext       500  176 12月  2 23:40 2011 .bash_profile
-rw-r--r--.  1 linuxtext       500  124 12月  2 23:40 2011 .bashrc
（略）
drwxr-xr-x.  2 linuxtext linuxtext 4096  7月  6 10:05 2012 ダウンロード
drwxr-xr-x.  2 linuxtext linuxtext 4096  7月  6 10:05 2012 テンプレート
drwxr-xr-x.  2 linuxtext linuxtext 4096  7月 26 18:33 2012 デスクトップ
drwxr-xr-x.  8 linuxtext linuxtext 4096  7月 27 14:07 2012 ドキュメント
（略）


ls -lのときより多くのファイルが現れました。特に.（ドット）で始まるファイルが見られます。ドットで始まるファイルは隠しファイルで、システム設定が書かれているファイルなどで主に使われます。

### オプションの同時指定と順序

オプションは、まとめてもまとめなくても同じ結果になります。さらに、順不同なので入れ替えても同じ結果になります。ただし、コマンドによっては順序と文法が細かく決まっている場合があるため、コマンドを実行する前にマニュアルやヘルプを参照してオプションの指定方法を確認してください。

実行例
$ ls -la
$ ls -al
$ ls -l -a
$ ls -a -l


コマンドオプションはハイフンを使って指定することが一般的ですが、コマンドによってはハイフンを必要としないコマンドもあるため注意が必要です。


○実習: ls -ltコマンドの実行


-ltオプションを付けてlsコマンドを実行した場合、ファイルの更新時刻順にソートしてリスト表示します。

$ ls -lt /home/linuxtext
合計 32
drwxr-xr-x. 8 linuxtext linuxtext 4096  7月 27 14:07 2012 ドキュメント
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月 26 18:33 2012 デスクトップ
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 ダウンロード
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 テンプレート
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 ビデオ
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 音楽
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 画像
drwxr-xr-x. 2 linuxtext linuxtext 4096  7月  6 10:05 2012 公開
（略）


ファイルの更新時刻が新しい順に並んでいるのがわかります。

### ファイルのコピー(cp)

ファイルを扱う上で、複製を作成するなど、コピーが必要になることがあります。それを行なうのがcp(CoPy)コマンドです。cpコマンドでファイルを複製し、新しくできた複製ファイルのファイル名を指定することができます。cpコマンドは、次のような処理を行ないます。

書式
cp [オプション] コピー元 コピー先 


実行例
$ cp src-file dst-file


### ファイルを別名のファイルとしてコピー

src-file がファイル名で、dst-fileが存在しないファイル名の場合、src-file のコピーとしてdst-fileが作成されます。

### ファイルをディレクトリにコピー

src-file がファイル名で、dst-fileがディレクトリ名の場合、dst-fileの下にファイルsrc-fileのコピーが作成されます。

### ファイルを新しいファイルで上書き

src-file がファイル名で、dst-fileが存在するファイル名の場合、ファイルdst-fileはファイルsrc-fileのコピーで上書きされます。

オプション
-i
処理を行なうときに確認をします。ファイルを上書きコピーするときなど、-iオプションを付けていると、コンピュータが確認のための問い合わせをしてきます。誤って上書きコピーすることを防ぐために利用されます。

-r
ディレクトリをコピーします。cpコマンドは基本的にファイルをコピーする機能のみですが、-rオプションを付けていると、ディレクトリの中にある全てのファイル・ディレクトリに対してコピーを行なうことができます。

-p
元ファイルの情報を保存します。ファイルには所有者・属性・更新日時など、ファイルに関するさまざまな情報があります。cpコマンドでコピーをすると、新しいファイルはそれらが全て新しい内容になってコピーされます。新しい内容を作成せず、古い情報を保持したままコピーを作成したい場合、この-pオプションを付けます。



○実習: cpコマンドの実行


cpコマンドを使って、実際にファイルをコピーしてみましょう。

 1. まずはオプションを付けないでcpコマンドを実行してみましょう。
$ cd ~
$ cp /etc/hosts ~
$ ls
hosts
（略）

hostsファイルをコピーできました。

 1. 次にファイルを別名としてコピーしてみましょう。
$ cd ~
$ cp /etc/hosts ~/hosts.newname
$ ls
hosts  hosts.newname
（略）

hosts.newnameという名前でコピーできました。

 1. cpコマンドを-pオプションを付けて実行してみます。
$ cp -p hosts.newname hosts.sametime
$ ls -l
合計 44
-rw-r--r--. 1 tooyama tooyama  158  5月 31 11:18 2012 hosts
-rw-r--r--. 1 tooyama tooyama  158  5月 31 11:24 2012 hosts.newname
-rw-r--r--. 1 tooyama tooyama  158  5月 31 11:24 2012 hosts.sametime
（略）

タイムスタンプが同一のファイルとしてコピーできました。

 1. cpコマンドを-rオプションを付けて実行してみます。ここでは2つのディレクトリをmkdirコマンド（後述）で作成して、ファイルをコピーしてみましょう。
$ mkdir olddir newdir
（olddirとnewdirを作成）
$ cp -r olddir/ newdir/
$ ls newdir/
olddir

newdirディレクトリにolddirディレクトリをコピーすることができました。

### ファイルの移動(mv)

ファイルを移動(MoVe)するときに利用するコマンドが、mvコマンドです。また、mvコマンドを使ってファイル名の変更も行えます。

書式
mv 移動元ファイル 移動先ファイル


オプション
-i
処理を行なうときに確認をします。ファイルを上書きするときなど、-iオプションを付けていると、コンピュータが確認のための問い合わせをしてきます。誤って上書きされることを防ぐために利用されます。

-f
強制的に処理を実行します。一部の処理では、mvコマンドが確認の問い合わせをします。その確認を無視し、強制的に処理を実行するためのオプションが-fです。


このmvコマンドを実行することにより、”移動元ファイル”を”移動先ファイル”に移動することができます。次の場合を考えてみましょう。

実行例
$ mv src-file dst-file


### ファイルを別のディレクトリに移動

src-fileがファイル名で、dst-fileが存在するディレクトリの場合、ファイルsrc-fileがディレクトリdst-fileの下に移動します。

### ディレクトリを別のディレクトリに移動

src-fileがディレクトリ名で、dst-fileが存在するディレクトリの場合、ディレクトリsrc-fileはディレクトリdst-fileの下に移動します。

### ファイル名の変更

src-fileがファイル名で、dst-fileが存在しないファイル名の場合、ファイルdst-fileにファイル名が変更されます。

### ディレクトリ名の変更

src-fileがディレクトリ名で、dst-fileが存在しないディレクトリ名の場合、ディレクトリdst-fileにディレクトリ名が変更されます。


○実習: mvコマンドの実行


それでは早速、mvコマンドを使ってみましょう。

 1. まず、ファイルの名前を変更してみます。
$ mv hosts.newname hosts.renew
$ ls -l
合計 44
-rw-r--r--. 1 tooyama tooyama  158  5月 31 11:18 2012 hosts
-rw-r--r--. 1 tooyama tooyama  158  5月 31 11:24 2012 hosts.renew
-rw-r--r--. 1 tooyama tooyama  158  5月 31 11:24 2012 hosts.sametime
（略）

hosts.newnameがhosts.renewファイルに名前変更されました。

 1. ファイルを別のディレクトリに移動してみます。ここではtestディレクトリをmkdirコマンド（後述）で作成して、ファイルを移動してみましょう。
$ mkdir test
$ mv hosts.renew test/
$ ls
hosts  hosts.sametime  test
（host.renewが移動されていることを確認）
$ ls test/
hosts.renew

testディレクトリにhost.renewを移動することができました。

### ファイルの削除(rm)

作成したファイルを削除するときに利用するコマンドが、rm(ReMove)コマンドです。rmコマンドは、削除したいファイルを指定します。

書式
rm ファイル名


rmコマンドのオプションは次のようになっています。

オプション
-i
処理を行なうときの確認です。対象ファイルを本当に削除してよいか、確認のための問い合わせをします。誤って削除することを防ぐために利用されます。

-f
強制的に処理を実行します。ファイルによっては、削除に確認を求められる場合がありますが、-fオプションはその確認を無視して、強制的に処理を継続します。

-r
ディレクトリを対象にします。ディレクトリの中の、ファイルやディレクトリも削除します。


実行例
$ rm file-delete


file-delete というファイルを削除します。rmコマンドは、対象のファイル名を入力します。Linuxを含むUNIX系OSでは、一度削除したファイルを復活させることはできません。
また、rmコマンドは、(オプション無しでは)ディレクトリを削除することはできません。ディレクトリの削除は、後述の、rmdirコマンドで説明します。


○実習: rmコマンドの実行


rmコマンドを使って実際にファイルを消してみましょう。

$ cd ~
$ rm hosts.sametime
$ rm -r test
$ ls -l
合計 36
-rw-r--r--. 1 tooyama tooyama  158  5月 31 11:18 2012 hosts
（略）


hosts.sametimeとtestディレクトリが削除されました。

### 共通オプションについて
cpとrmに同じようなオプションがあったことに気がついたでしょうか？コマンドオプションはいくつかありますが、その1つに-rがあります。cpに-rオプションを付けた場合はディレクトリ階層全部コピーすることを示し、rmに-rオプションを付けた場合はディレクトリ階層の中をすべて削除します。
-rはrecursive（再帰）を示すオプションで、「ディレクトリの中のディレクトリの中の・・・」という階層構造の中の中までを意味します。

## ディレクトリの操作（pwd,cd,mkdir,rmdir）

次にディレクトリについて学習します。ディレクトリの操作に使われるコマンドとして、pwd、cd、mkdir、rmdirについて説明します。 

### 現在のディレクトリの表示(pwd)

ディレクトリは、階層構造になっています。その階層の中で、現在どの位置にいるか表示するのが、このpwd(Print Working Directory)です。次のように入力します。

書式
pwd


実行例
$ pwd
/home/penguin


現在、このユーザは/home/penguinというディレクトリにいることがわかります。/は、ディレクトリの区切りを示す記号です。

### ディレクトリの変更(cd)

cd(Change Directory)コマンドを実行すると、現在いるディレクトリを変更することができます。cdの後にスペースを入力し、続けて移動先のディレクトリを指定します。ディレクトリを指定しない場合はホームディレクトリ(後述)に移動します。

書式
cd [ディレクトリ名]



○実習: ディレクトリの移動


それでは早速今回覚えたコマンドを実行してみましょう。pwdで現在いる場所を確認して、cdコマンドでディレクトリの移動を行ないます。

$ pwd
/home/penguin
$ cd /usr
$ pwd
/usr


ディレクトリの移動に成功しました。

### ディレクトリの作成(mkdir)

mkdirコマンドを実行すると、ディレクトリを作成できます。mkdirの後にスペースを入力し、続けて作成するディレクトリ名を指定します。

書式
mkdir ディレクトリ名


オプション
-p
指定されたディレクトリの上位ディレクトリも作成する


ディレクトリ dir1 の下にディレクトリ dir2 を作り、さらにディレクトリ dir2 の下にディレクトリ dir3 を作りたいとき、次のように入力します。


実行例：オプションを付けない例
$ mkdir dir1
$ mkdir dir1/dir2
$ mkdir dir1/dir2/dir3



mkdirコマンドを3つに分けて実行しました。これは、ディレクトリを作るときはその上位層ができていないと作成できない、という制約があるためです。-pオプションを付けて実行すると次のように一度に実行できます。


実行例：オプションを付けた例
$ mkdir -p dir1/dir2/dir3



○実習: mkdir -pコマンドの実行


mkdirを-pオプション付きで早速実行してみましょう。

$ mkdir -p dir4/dir5/dir6
$ ls -R dir4
dir4:
dir5
dir4/dir5:
dir6
dir4/dir5/dir6:



このコマンドの結果から、dir4にはdir5ディレクトリが作られ、dir5ディレクトリにはdir6ディレクトリが作られたことがわかります。また、dir6ディレクトリの中には何もファイルやディレクトリがないということがわかります。

### ディレクトリの削除(rmdir)

ディレクトリを削除するコマンドとしてrmdirコマンドがあります。

書式
rmdir ディレクトリ名


オプション
-p
指定した階層までのディレクトリを一括で削除します。オプションを付けないでrmdirコマンドを実行した場合は、最下層のディレクトリのみ削除します。ただしいずれの場合も、対象とするディレクトリ内は空でなければなりません。

(例)dict1/dict2ディレクトリを一括で削除
rmdir -p dict1/dict2


rmdirの特徴は、「中が空であるときのみ」ディレクトリを削除できることです。ディレクトリの中にファイルが存在していると、ディレクトリは削除できません。

ディレクトリにファイルが存在する場合、ディレクトリを削除するには以下のようにrm -rコマンドを用いて行なうことができます。

$ ls
directory
$ rmdir directory/
rmdir: failed to remove `directory/': ディレクトリは空ではありません
（directoryの削除に失敗）
$ rm -r directory/
（rm -rを実行）
$ ls
（directoryディレクトリが削除された）



○実習: ディレクトリの削除


ディレクトリの削除に利用するコマンドのrmdirコマンドとrmコマンドを使ってみましょう。

$ mkdir directory1 directory2
（ディレクトリを作成）
$ touch directory2/file 
（directory2ディレクトリ内にfileを作成）
$ ls
directory1  directory2
$ rmdir directory1
$ ls
directory2
（directory1は空なので削除できる）
$ rmdir directory2
rmdir: failed to remove `directory2/': ディレクトリは空ではありません
（directory2は空ではないため削除できない）
$ rm -r directory2/
$ ls
（directory2も削除できた）


rmdirコマンドはディレクトリを削除するコマンドですが、削除対象のディレクトリは空である必要があります。

空ではないディレクトリを削除するにはrmdirコマンドではなく、rmコマンドに-rオプションを付けて実行します。このコマンドを実行すると、特に警告されることなく指定したディレクトリ以下のディレクトリとファイルを削除することができます。

ただし、通常利用時はrmdirを使う癖をつけておくと、必要なディレクトリを誤って削除してしまうミスを軽減できるので安心です。

### 特別なディレクトリ

Linuxでは、ディレクトリの中で特別なディレクトリや、それを表す記号があります。以下がその代表的なものです。

### カレントディレクトリ(.)

現在いるディレクトリのことです。ファイルやディレクトリ操作では「ドット」を使って表わします。

### 親ディレクトリ(..)

1階層上のディレクトリのことです。カレントディレクトリが/home/penguinの場合、/homeが親ディレクトリにあたります。

### ホームディレクトリ(~)

ユーザの作業開始位置となるディレクトリです。ログイン直後のユーザは、必ずホームディレクトリにいます。ユーザごとに異なるホームディレクトリを使うので、それぞれのユーザにとってホームディレクトリは異なります。ファイルやディレクトリ操作では「~ チルダ」を使って表わします。

### ルートディレクトリ(/)

ディレクトリ階層の、最上位階層を示します。ファイルやディレクトリ操作では「/ ルート」を使って表わします。

### 絶対(パス)指定と相対(パス)指定

カレントディレクトリが/usr/localであるとします。このとき、/usr/bin/xxxのファイルを指定するには、次の2通りが存在します。
//olnum[1]
 1. /usr/bin/xxx
 1. ../bin/xxx

1.は、最上位のディレクトリ(/)からディレクトリ・ファイル名を指定しています。2.は、「自分が現在いる位置からみて」ディレクトリ・ファイル名を指定しています。1.の方法を絶対(パス)指定といい、2.の方法を相対(パス)指定といいます。
絶対(パス)指定は、どのディレクトリにいてもパスを指定できます。逆に、相対(パス)指定は、現在のディレクトリが変わると利用できない、という特徴があります。また、絶対(パス)指定は、常に/から指定するので非常に記述が長くなることがあります。相対(パス)指定は、現在の位置から見て非常に近いディレクトリのときは、指定の記述が短くて済む、という特徴があります。
ここでは、penguinというユーザのホームディレクトリが、/home/penguinであるという想定をしています。


○実習: さまざまなディレクトリへの移動


それでは早速、ディレクトリからディレクトリへ、コマンドを実行して移動してみましょう。
ここでは例として、penguinユーザがいると仮定してコマンドを実行しています。

$ cd ~
$ pwd
/home/penguin	
$ cd ..		
$ pwd
/home
$ cd /usr
$ pwd
/usr
$ cd ~	
$ pwd
/home/penguin
$ cd ../../		
$ pwd
/


## ファイルの内容を表示

ファイルの内容を表示するコマンドについて説明します。

### ファイルの内容を表示(cat)

ファイルの内容を確認するコマンドの1つであるcatコマンドを利用する方法について説明します。

書式
cat ファイル名
ファイルの内容を表示することができます。


オプション
-n
行番号を付加して表示します。



○実習: catコマンドの実行


ホームディレクトリ内のファイル.bashrcを確認してみましょう。

$ cat ~/.bashrc
# .bashrc
# Source global definitions
if [ -f /etc/bashrc ]; then
（略）
$ cat -n ~/.bashrc
     1	# .bashrc
     2
     3	# Source global definitions
     4	if [ -f /etc/bashrc ]; then
（略）


catで内容が確認でき、-nオプションを付けることで、行番号を表示できることが確認できました。

### ページャを使った表示

catコマンドを使ってファイルの内容を表示するとき、行数がたくさんあると表示が流れてしまいます。皆さんが利用するコマンドラインは、多くの場合25行に設定されているため、それ以上の行は流れてしまって確認できません。
たくさんの行があっても、画面制御を行なってスクロールを途中で止めてくれる機能のことをページングといい、それを実現するコマンドをページャといいます。
代表的なページャとしてはmoreやlessコマンドがあげられます。使い方はcatコマンドなどと同じで、オプションとしてページングする対象のファイル名をとります。

書式
more ファイル名
less ファイル名


ページャでファイルを開いた後は、次のようにコマンドを入力すると操作ができます。

//tsize[20,50]
//table[tbl1][moreコマンドの場合
項目	内容	
---------------------------------------------------------------------------
スペース	次のページに進む
b	前の一画面に戻る
f	次の一画面に進む
/単語	単語を検索します。nキーで検索結果をジャンプします
q	ページャコマンドを終了(quit)します。



//tsize[20,50]
//table[tbl2][lessコマンドの場合
項目	内容	
---------------------------------------------------------------------------
スペース	次のページに進む
b	前の一画面に戻る
f	次の一画面に進む
↑	前の行に進む
↓	次の行に進む
/単語	単語を検索します。nキーで検索結果をジャンプします
q	ページャコマンドを終了(quit)します。



○実習: ページャを使ったファイル閲覧


ページャを使って、複数行の記述があるファイルの確認を行なってみます。

$ more /etc/hosts


さまざまなコマンド入力後qを入力して終了させてください。

$ less /etc/hosts


さまざまなコマンド入力後qを入力して終了させてください。

## ファイルの検索（find）

ファイルがどこのディレクトリに存在するか、findコマンドにて検索できます。

書式
find パス -name ファイル名



○実習: ファイルの検索


/etc配下にあるhostsという名前のファイルを検索してみましょう。

$ find /etc/ -name hosts
find: `/etc/pki/CA/private': 許可がありません
find: `/etc/pki/rsyslog': 許可がありません
find: `/etc/ntp/crypto': 許可がありません
/etc/sysconfig/networking/profiles/default/hosts
（略）
/etc/hosts
/etc/avahi/hosts
（略）


/etc配下には、一般ユーザには読み込み権限が与えられてないディレクトリが多くあります。findコマンドはパスで指定した配下の全てのディレクトリへの検索を試みますので、必要であれば適切な権限を持ったユーザへ切り替えて実行してください。

## コマンドのパス

コマンドの実体はプログラムです。プログラムもファイルの一種であり、/binや/sbinといったプログラム用のディレクトリに配置されています。

### コマンドのパスを表示(which)

基本的なコマンドを実行するとき、その実体であるプログラムがどのディレクトリに配置されているかを意識する必要はありません。これは、PATHという環境変数にプログラムが配置されているディレクトリが設定されているからです。whichというコマンドを用いると、PATH環境変数に含まれるディレクトリ配下に配置されているコマンドのパスを表示することができます。

書式
which コマンド名



○実習: whichコマンドの実行


コマンドのパスを調べるためにはwhichコマンドを使います。ここでは例としてcatコマンドのパスを確認してみます。

$ echo $PATH
/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/home/linuxtext/bin
（ユーザが参照できるパスを確認）

$ which cat
/bin/cat
（catコマンドは/bin配下に配置されているのがわかる）


コマンドが存在するディレクトリがPATH環境変数に含まれていないと、whichコマンドの結果はエラーとなります。例えば管理者権限が必要なコマンドへのパスは一般ユーザでは設定されていないため（設定されているディストリビューションもあります）、whichコマンドでは確認できないことがあります。

## ヘルプの使い方

コマンドにはヘルプが含まれていることがあります。実行したいコマンドに対して-@<raw>{|latex|{\-helpオプションなどをつけて実行することで、コマンドの実行に使えるオプションを調べることができます。

書式
コマンド --help


実行例
$ ls --help
使用法: ls [オプション]... [ファイル]...
List information about the FILEs (the current directory by default).
Sort entries alphabetically if none of -cftuvSUX nor --sort.

長いオプションに必須の引数は短いオプションにも必須です.
  -a, --all                  do not ignore entries starting with .
  -A, --almost-all           do not list implied . and ..
（略）


## マニュアルの使い方

Linuxには、便利なオンラインマニュアルが含まれています。ここではその使い方を紹介します。

書式
man コマンド名


オプション
-k 単語
'単語'が含まれるエントリ一覧を出力します。



では、例としてlsコマンドのマニュアルを調べてみましょう。


実行例
$ man ls
LS(1)                                                       LS(1)
名前
       ls, dir, vdir - ディレクトリの中身をリスト表示する
書式
       ls [OPTION]... [FILE]...
（略）

-l     ファイルのモード・リンクの数・所有者名・グループ名・ (バイト単位
       の) サイズ・タイムスタンプ・名前を (1 列形式で) 書き出す。デフォ
       ルトでは、表示されるタイムスタンプは最終修正時刻である。オプショ
       ン -c と -u のときは、他の 2 つのタイムスタンプを選択する。デ バ
       イススペシャルファイルの場合、通例として、サイズを表示する場所が
       デバイスのメジャー番号とマイナー番号に置き換えられる。
（略）

lsコマンドがディレクトリの内容を表示する機能があるということがわかります。また、-l オプションにより、ファイルに関するさまざまな情報が表示されることもわかります。そのほか、以下の項目があります。

### 説明

このプログラムに関する説明です。

### POSIX/GNUオプション

プログラムで利用可能なオプションです。指定したオプションによってプログラムの動作が変わります。

### 関連項目

このプログラムに関連しているコマンドや、他の機能です。ここに列挙している内容をmanコマンドで調べることができます。

### 注意

このプログラムに関する注意事項やバグの報告先などの情報が書かれています。

その他、コマンドによりマニュアルにさまざまな項目が表示されます。

○実習: manコマンドの実行


manコマンドはそのあと指定するコマンドに対するマニュアルを表示するためのコマンドです。ここでは例としてcpコマンドのマニュアルを見てみます。

$ man cp


manコマンドの表示は、ページャ機能が利用されます。従ってスクロール等はlessコマンドの操作と同じになります。

### セクション

lsのマニュアルで、「LS(1) 」という記述があります。これは、lsのマニュアルがセクション1にある、という意味です。マニュアルのセクションとは、マニュアルの内容を分野毎に分け、その分野を指定したものです。セクションには番号がついており、以下の表のようになっています。

//tsize[10,50]
//table[tbl3][マニュアルのセクション
項目	内容	
---------------------------------------------------------------------------
1	ユーザコマンド
2	システムコール
3	システムライブラリや関数
4	デバイスやデバイスドライバ
5	ファイルの形式
6	ゲームやデモなど
7	その他
8	システム管理系のコマンド
9	カーネルなどの情報



○実習: セクション別のマニュアルの表示


内容が複数のマニュアルに分かれていることがあります。今回はpasswdコマンドのマニュアルを開き、別セクションのドキュメントを開いてみましょう。

$ man passwd
（略）
関連項目
       group(5), passwd(5), shadow(5).


マニュアルを読み進めていくと、「関連項目」というものが見つかり、passwd(5)というマニュアルがあることが記述されています。これは「セクション5にやはりpasswdというエントリがあるので、それも参照できますよ」という意味があります。qでmanコマンドを終了させ、セクション5のマニュアルを参照します。セクション5のpasswdのエントリを見るには次のように入力します。

$ man 5 passwd
PASSWD(5)                File Formats and Conversions                PASSWD(5)
NAME
       passwd - the password file
（略）


と出力されます。これは、/etc/passwdというファイルについての説明です。/etc/passwdには、ログイン名とパスワードの情報が記述されていますので、それについてのマニュアルが表示された、ということになります。
このように、同じエントリでも複数のマニュアルが対応する場合、セクションを切り替えて参照することができます。
